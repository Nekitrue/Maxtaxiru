<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–¢–∞–∫—Å–∏ MAX Neon</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { 
            --neon-yellow: #fcc200; 
            --neon-purple: #bc13fe; 
            --silver: #c0c0c0; 
            --bg-dark: #0d0d0d; 
            --card-bg: #1a1a1a;
        }

        * { box-sizing: border-box; }

        body { 
            font-family: -apple-system, system-ui, sans-serif; 
            background: var(--bg-dark); 
            color: var(--silver); 
            margin: 0; 
            padding: 10px 15px; 
        }

        .container { 
            width: 100%; 
            background: var(--card-bg); 
            border-radius: 20px; 
            padding: 20px; 
            box-shadow: 0 0 15px rgba(188, 19, 254, 0.2); 
            border: 1px solid rgba(192, 192, 192, 0.1);
        }
        
        .field-group { margin-bottom: 18px; position: relative; }
        label { 
            font-size: 13px; 
            font-weight: 600; 
            color: var(--neon-yellow); 
            text-transform: uppercase; 
            letter-spacing: 1px;
            margin-bottom: 8px; 
            display: block; 
        }
        
        input, textarea { 
            width: 100%; 
            padding: 14px; 
            border: 1px solid rgba(192, 192, 192, 0.3); 
            border-radius: 12px; 
            font-size: 16px; 
            outline: none; 
            background: #252525; 
            color: #fff; 
            transition: 0.3s; 
        }
        input:focus { border-color: var(--neon-purple); box-shadow: 0 0 8px var(--neon-purple); }

        .add-stop-btn { color: var(--neon-purple); font-size: 14px; font-weight: 600; border: none; background: none; padding: 10px 0; cursor: pointer; }

        .suggestions { 
            position: absolute; top: 100%; left: 0; right: 0; 
            background: #252525; border: 1px solid var(--neon-purple); 
            border-radius: 12px; z-index: 1000; display: none; 
        }
        .suggestion-item { padding: 12px; border-bottom: 1px solid #333; color: #fff; font-size: 14px; }

        /* –ë–õ–û–ö –¶–ï–ù–´ */
        .price-section { 
            background: rgba(252, 194, 0, 0.05); 
            border: 2px solid var(--neon-yellow); 
            border-radius: 18px; 
            padding: 15px; 
            margin: 20px 0; 
        }
        .price-container { display: flex; align-items: center; justify-content: space-between; }
        .price-display { font-size: 34px; font-weight: 800; color: var(--neon-yellow); text-shadow: 0 0 5px var(--neon-yellow); }
        .btn-round { 
            width: 45px; height: 45px; border-radius: 50%; border: 1px solid var(--silver); 
            background: #333; color: var(--silver); font-size: 24px; cursor: pointer; 
        }

        /* –°–ü–û–°–û–ë –û–ü–õ–ê–¢–´ - –í–´–†–ê–í–ù–ò–í–ê–ù–ò–ï */
        .payment-container { margin-bottom: 20px; }
        .pay-row { 
            display: flex; 
            gap: 10px; 
            justify-content: space-between; 
        }
        .pay-btn { 
            flex: 1; /* –ö–Ω–æ–ø–∫–∏ –±—É–¥—É—Ç –∏–º–µ—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—É—é —à–∏—Ä–∏–Ω—É */
            padding: 12px 5px; 
            border-radius: 10px; 
            border: 1px solid var(--silver); 
            background: #252525; 
            font-size: 13px; 
            font-weight: 600; 
            color: var(--silver);
            cursor: pointer; 
            text-align: center; 
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .pay-btn.active { 
            border-color: var(--neon-purple); 
            background: var(--neon-purple); 
            color: #fff; 
            box-shadow: 0 0 10px var(--neon-purple);
        }

        .order-button { 
            width: 100%; padding: 18px; 
            background: var(--neon-yellow); 
            color: #000; border: none; 
            border-radius: 15px; font-size: 18px; 
            font-weight: 800; cursor: pointer; 
            box-shadow: 0 0 15px var(--neon-yellow);
        }
    </style>
</head>
<body>

<div class="container">
    <div class="field-group">
        <label>–û—Ç–∫—É–¥–∞:</label>
        <input type="text" id="from" placeholder="–£–ª–∏—Ü–∞ –∏ –¥–æ–º" autocomplete="off" onfocus="showGeoPrompt(this)" oninput="getSuggestions(this)">
        <div class="suggestions"></div>
    </div>

    <div id="extra-stops"></div>
    <button class="add-stop-btn" id="add-btn" onclick="addExtraStop()">+ –î–æ–±–∞–≤–∏—Ç—å –∞–¥—Ä–µ—Å</button>
    
    <div class="field-group">
        <label>–ö—É–¥–∞:</label>
        <input type="text" id="to" placeholder="–ö—É–¥–∞ –µ–¥–µ–º?" autocomplete="off" oninput="getSuggestions(this)">
        <div class="suggestions"></div>
    </div>

    <div class="field-group">
        <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
        <textarea id="comment" rows="1" placeholder="..."></textarea>
    </div>

    <div class="price-section">
        <div class="price-container">
            <button class="btn-round" onclick="adjustPrice(-100)">‚àí</button>
            <div class="price-display" id="display_price">300 ‚ÇΩ</div>
            <button class="btn-round" onclick="adjustPrice(100)">+</button>
        </div>
    </div>

    <div class="payment-container">
        <label>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:</label>
        <div class="pay-row">
            <div id="pay-cash" class="pay-btn active" onclick="setPayment('–ù–∞–ª–∏—á–Ω—ã–µ')">üíµ –ù–∞–ª–∏—á–Ω—ã–µ</div>
            <div id="pay-online" class="pay-btn" onclick="setPayment('–ü–µ—Ä–µ–≤–æ–¥')">üì≤ –ü–µ—Ä–µ–≤–æ–¥</div>
        </div>
    </div>

    <button class="order-button" onclick="confirmOrder()">–ó–ê–ö–ê–ó–ê–¢–¨</button>
</div>

<script>
    let tg = window.Telegram.WebApp;
    tg.expand();
    tg.setHeaderColor("#0d0d0d");

    let currentPrice = 300;
    let paymentMethod = '–ù–∞–ª–∏—á–Ω—ã–µ';

    function adjustPrice(amount) {
        if (currentPrice + amount >= 100) {
            currentPrice += amount;
            document.getElementById('display_price').innerText = currentPrice + " ‚ÇΩ";
        }
    }

    function setPayment(method) {
        paymentMethod = method;
        document.getElementById('pay-cash').classList.toggle('active', method === '–ù–∞–ª–∏—á–Ω—ã–µ');
        document.getElementById('pay-online').classList.toggle('active', method === '–ü–µ—Ä–µ–≤–æ–¥');
    }

    function addExtraStop() {
        const container = document.getElementById('extra-stops');
        const div = document.createElement('div');
        div.className = 'field-group';
        div.innerHTML = `<label>–ó–∞–µ—Ö–∞—Ç—å:</label><input type="text" placeholder="–ê–¥—Ä–µ—Å">`;
        container.appendChild(div);
        document.getElementById('add-btn').style.display = 'none';
    }

    // –í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ API DaData –∏–∑ –≤–∞—à–µ–≥–æ –ø—Ä–æ—à–ª–æ–≥–æ –∫–æ–¥–∞ (getSuggestions, getCurrentLocation –∏ —Ç.–¥.)
</script>
</body>
</html>
